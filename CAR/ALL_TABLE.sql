CREATE TABLE CAR 
(
    CAR_ID NUMBER(10) GENERATED BY DEFAULT AS IDENTITY,
    PLATE VARCHAR2(12) NOT NULL UNIQUE,
    CAR_CLASS VARCHAR2(20) NOT NULL,
    FUEL_TYPE VARCHAR2(10) NOT NULL,
    GEAR_TYPE VARCHAR2(20) NOT NULL,
    
    CONSTRAINT PK_CAR_ID
    PRIMARY KEY (CAR_ID)
)


CREATE TABLE CAR_INFO 

(
    CAR_INFO_ID NUMBER(10) GENERATED BY DEFAULT AS IDENTITY,
    CAR_ID NUMBER(10) NOT NULL UNIQUE,
    CAR_MODEL VARCHAR2(50) NOT NULL,
    CAR_NAME VARCHAR2(50) NOT NULL,
    CAR_YEAR VARCHAR2(50) NOT NULL,
    CAR_KILOMETER VARCHAR2(50) NOT NULL,
    
    CONSTRAINT PK_CAR_INFO_ID
    PRIMARY KEY (CAR_INFO_ID),
    
    
    CONSTRAINT FK_CAR_INFO_CAR_ID
    FOREIGN KEY (CAR_ID) REFERENCES CAR(CAR_ID)
    ON DELETE CASCADE
);

CREATE TABLE CAR_LOCATION 
(
    CAR_LOCATION_ID NUMBER(10) GENERATED BY DEFAULT AS IDENTITY,
    CAR_INFO_ID NUMBER (10) UNIQUE NOT NULL,
    COORDINATE_ID NUMBER(10) NOT NULL,
    
    CONSTRAINT PK_CAR_LOCATION
    PRIMARY KEY (CAR_LOCATION_ID),
    
    CONSTRAINT FK_CAR_LOCATION_CAR_INFO_ID
    FOREIGN KEY (CAR_INFO_ID) REFERENCES CAR_INFO(CAR_INFO_ID),
    
    CONSTRAINT FK_CAR_LOCATION_COORDINATE_ID
    FOREIGN KEY (COORDINATE_ID) REFERENCES COORDINATE (COORDINATE_ID)
    
);


CREATE TABLE COORDINATE
(
    COORDINATE_ID NUMBER(10) GENERATED BY DEFAULT AS IDENTITY,
    LATITUDE NUMBER(16,13) NOT NULL,
    LONGITUDE NUMBER (16,13) NOT NULL,
    IS_ACTIVE CHAR(1) NOT NULL,
    
    CONSTRAINT PK_COORDINATE_ID
    PRIMARY KEY (COORDINATE_ID),
    
    CONSTRAINT CHECK_IS_ACTIVE
    CHECK (IS_ACTIVE IN ('Y','N'))
)